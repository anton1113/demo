node('master') {

    def userInput

    stage('input') {
        userInput = input(
                id: 'userInput', message: 'Please enter the parameters', parameters: [
                [$class: 'TextParameterDefinition', description: 'Hash of the desired commit', name: 'commit hash'],
                [$class: 'TextParameterDefinition', description: 'Date of the desired build (dd-MM-yyyy)', name: 'build date']
        ])
        echo ("Commit hash: "+userInput['commit hash'])
        echo ("Commit date: "+userInput['build date'])
    }

    stage('deploy') {
        def commitHash = userInput['commit hash']
        def buildDate = userInput['build date']
        def folderName = sh(script: 'ls | grep ' + commitHash + ' | tail -1', returnStdout: true)
        echo folderName
    }
}